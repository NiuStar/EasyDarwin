import{j as qe}from"./qrcode-vue3-D8yUKOQT.1745908813000.js";import{r as M}from"./request-YcnqGFH7.1745908813000.js";import{c as ze}from"./vue-clipboard3-BbN2I1tX.1745908813000.js";import{O as q,F as ge,v as xe,f as Ce,W as Ve,X as he,I as ve,Y as we,T as Te,S as Ue,h as Se,Z as Me,e as fe,B as me,r as le,$ as He,a0 as Ne,t as We,Q as Ae}from"./ant-design-vue-Cj-U8itT.1745908813000.js";import{a8 as de,N as $e,a9 as Je,P as Qe,a3 as _e,a4 as Xe,A as Ze,D as Ke,e as Ye}from"./@ant-design-hG4s7qJ_.1745908813000.js";import{r as _,a as Ge,V as x,W as r,X as t,c as l,Z as R,a1 as S,F as H,J as u,u as L,a3 as te,L as ke,w as ne,j as Le,t as ce,$ as U,_ as et}from"./@vue-fLYPIjUY.1745908813000.js";import{_ as ye}from"./_plugin-vue_export-helper-DlAUqK2U.1745908813000.js";import{d as tt}from"./lodash-es-BdrSUpMS.1745908813000.js";import"./axios-xsH4HHeE.1745908813000.js";import"./qs-DSE2t9XA.1745908813000.js";import"./call-bind-apply-helpers-BcuExw2V.1745908813000.js";import"./function-bind-CHqF18-c.1745908813000.js";import"./es-errors-CFxpeikN.1745908813000.js";import"./side-channel-BL6VZZ_6.1745908813000.js";import"./object-inspect-BnRfInLN.1745908813000.js";import"./crypto-js-DwhFnUKC.1745908813000.js";import"./side-channel-list-yug-uXxR.1745908813000.js";import"./side-channel-map-Dzb7GGi5.1745908813000.js";import"./get-intrinsic-BzF2e9EC.1745908813000.js";import"./es-object-atoms-Ditt1eQ6.1745908813000.js";import"./math-intrinsics-Cv-yPkyD.1745908813000.js";import"./gopd-fcd2-aIC.1745908813000.js";import"./es-define-property-bDCdrV83.1745908813000.js";import"./has-symbols-BaUvM3gb.1745908813000.js";import"./get-proto-CiMKMH9q.1745908813000.js";import"./dunder-proto-COSeH1zQ.1745908813000.js";import"./hasown-D59mRYJb.1745908813000.js";import"./call-bound-B3J_EjOg.1745908813000.js";import"./side-channel-weakmap-ILlw78Ei.1745908813000.js";import"./index-CAN_IODE.1745908813000.js";import"./vue-i18n-CVnhwQ5N.1745908813000.js";import"./@intlify-qjRvhfuG.1745908813000.js";import"./nprogress-DtBTSmDr.1745908813000.js";/* empty css                                  */import"./dayjs-g0tvK8jc.1745908813000.js";import"./pinia-DhPZCg3F.1745908813000.js";import"./pinia-plugin-persistedstate-n2tMOXAx.1745908813000.js";import"./vue-router-DPJtmemu.1745908813000.js";import"./@iconify-aF5GdBrB.1745908813000.js";import"./@babel-Bq4_u9L9.1745908813000.js";import"./@ctrl-DOFZgDuz.1745908813000.js";import"./resize-observer-polyfill-B1PUzC5B.1745908813000.js";import"./dom-align-CRCehRfe.1745908813000.js";import"./async-validator-9PlIezaS.1745908813000.js";import"./scroll-into-view-if-needed-DEyyyXdZ.1745908813000.js";import"./compute-scroll-into-view-1gs_hJI2.1745908813000.js";import"./throttle-debounce-CUWDS_la.1745908813000.js";import"./vue-types-CF28atMM.1745908813000.js";import"./@emotion-BtrR-yrm.1745908813000.js";import"./stylis-D5iaQeiq.1745908813000.js";import"./clipboard-BPLo0dsb.1745908813000.js";const B={getLiveList(m){return M({url:"/live",method:"get",params:m})},getLiveInfo(m){return M({url:`/live/info/${m}`,method:"get"})},postPlayStart(m){return M({url:`/live/play/start/${m}`,method:"get"})},postPlayStop(m){return M({url:`/live/play/stop/${m}`,method:"get"})},getStreamInfo(m){return M({url:`/live/stream/info/${m}`,method:"get"})},postLive(m,$){return M({url:`/live/${m}`,method:"post",data:$})},putLive(m,$,g){return M({url:`/live/${m}/${$}`,method:"put",data:g})},putLiveOne(m,$,g,a){return M({url:`/live/${m}/${$}/${g}/${a}`,method:"put"})},deleteLive(m){return M({url:`/live/${m}`,method:"delete"})}},{toClipboard:lt}=ze(),oe=async(m,$="")=>{try{await lt(m),q.success({description:$+" 复制成功!"})}catch{q.error({description:$+" 复制失败!"})}},nt={__name:"form",emits:["ok"],setup(m,{expose:$,emit:g}){const a=g,C=_(!1),b=_("pull"),v=_(!1),k=_(0),e=Ge({}),w=()=>{e.isLive&&(e.speedEnum=0),v.value?B.postLive(b.value,ke(e)).then(o=>{o.status==200&&(q.success({description:"添加成功!"}),a("ok"))}):B.putLive(b.value,k.value,ke(e)).then(o=>{o.status==200&&(q.success({description:"修改成功!"}),a("ok"))})},E=o=>{console.log("Failed:",o)},D=o=>{p(),o==null?v.value=!0:(b.value=o.liveType,v.value=!1,e.name=o==null?void 0:o.name,e.url=o==null?void 0:o.url,e.enable=o==null?void 0:o.enable,e.onDemand=o==null?void 0:o.onDemand,e.audio=o==null?void 0:o.audio,e.transType=o==null?void 0:o.transType,e.authed=o==null?void 0:o.authed,e.speedEnum=o==null?void 0:o.speedEnum,e.isLive=o==null?void 0:o.isLive,k.value=o==null?void 0:o.id),C.value=!0},P=()=>{B.putLiveOne(b.value,k.value,"sign",0).then(o=>{o.status==200&&(queryData(),q.success({description:"更新成功!"}))})},T=()=>{C.value=!1},p=()=>{e.name="",e.url="",e.authed=!0,e.enable=!0,e.onDemand=!1,e.audio=!1,e.transType="TCP",e.isLive=!0,e.speedEnum=0,k.value=0,b.value="pull"},j={style:{width:"80px"}};return $({setOpen:D,setClose:T}),(o,n)=>{const Y=Ce,I=xe,z=he,Q=Ve,X=ve,G=Te,se=we,W=Se,ae=Ue,ee=Me,A=me,ue=fe,ie=ge,re=le;return r(),x(re,{open:C.value,"onUpdate:open":n[14]||(n[14]=c=>C.value=c),title:v.value?"添加":"编辑"},{footer:t(()=>n[33]||(n[33]=[])),default:t(()=>[l(ie,{model:e,"label-col":j,onFinish:w,onFinishFailed:E},{default:t(()=>[l(I,{label:"启用"},{default:t(()=>[l(Y,{checked:e.enable,"onUpdate:checked":n[0]||(n[0]=c=>e.enable=c)},null,8,["checked"])]),_:1}),l(I,{label:"类型"},{default:t(()=>[l(Q,{value:b.value,"onUpdate:value":n[1]||(n[1]=c=>b.value=c)},{default:t(()=>[k.value==0?(r(),R(H,{key:0},[l(z,{value:"pull"},{default:t(()=>n[15]||(n[15]=[u("拉流")])),_:1}),l(z,{value:"push"},{default:t(()=>n[16]||(n[16]=[u("推流")])),_:1})],64)):(r(),R(H,{key:1},[b.value=="pull"?(r(),x(z,{key:0,value:"pull"},{default:t(()=>n[17]||(n[17]=[u("拉流")])),_:1})):S("",!0),b.value=="push"?(r(),x(z,{key:1,value:"push"},{default:t(()=>n[18]||(n[18]=[u("推流")])),_:1})):S("",!0)],64))]),_:1},8,["value"])]),_:1}),l(I,{label:"名称",name:"name",rules:[{required:!0,message:"名称不能为空!"}]},{default:t(()=>[l(X,{value:e.name,"onUpdate:value":n[2]||(n[2]=c=>e.name=c),placeholder:"请输入名称"},null,8,["value"])]),_:1}),b.value=="push"?(r(),R(H,{key:0},[l(I,{label:"推流鉴权"},{default:t(()=>[l(Y,{checked:e.authed,"onUpdate:checked":n[3]||(n[3]=c=>e.authed=c)},null,8,["checked"])]),_:1}),e.url!=""?(r(),x(I,{key:0,label:"推流地址"},{default:t(()=>[l(X,{value:e.url,"onUpdate:value":n[6]||(n[6]=c=>e.url=c),disabled:""},{addonBefore:t(()=>[l(se,{placement:"top"},{content:t(()=>[l(G,{bordered:!1,color:"warning"},{default:t(()=>n[19]||(n[19]=[u("注: 启用鉴权后更新鉴权，推流会断开重新校验!")])),_:1})]),title:t(()=>n[20]||(n[20]=[])),default:t(()=>[l(L($e),{class:"cp",onClick:n[4]||(n[4]=c=>P())})]),_:1})]),addonAfter:t(()=>[l(L(de),{class:"cp",onClick:n[5]||(n[5]=c=>L(oe)(e.url))})]),_:1},8,["value"])]),_:1})):S("",!0),e.url!=""?(r(),x(I,{key:1,label:"扫码推流"},{default:t(()=>[l(L(qe),{width:200,height:200,value:e.url,qrOptions:{typeNumber:0,mode:"Byte",errorCorrectionLevel:"H"},imageOptions:{hideBackgroundDots:!0,imageSize:.4,margin:0},dotsOptions:{type:"dots",color:"#000000",gradient:{type:"linear",rotation:0,colorStops:[{offset:0,color:"#000000"},{offset:1,color:"#000000"}]}},backgroundOptions:{color:"#ffffff"},cornersSquareOptions:{type:"dot",color:"#000000"},cornersDotOptions:{type:void 0,color:"#000000"},fileExt:"png",myclass:"my-qur",imgclass:"img-qr"},null,8,["value"])]),_:1})):S("",!0)],64)):S("",!0),b.value=="pull"?(r(),R(H,{key:1},[l(I,{label:"地址"},{default:t(()=>[l(X,{value:e.url,"onUpdate:value":n[7]||(n[7]=c=>e.url=c),placeholder:"请输入地址rtsp://"},null,8,["value"])]),_:1}),l(I,{label:"流类型"},{default:t(()=>[l(Q,{value:e.isLive,"onUpdate:value":n[8]||(n[8]=c=>e.isLive=c)},{default:t(()=>[l(z,{value:!0},{default:t(()=>n[21]||(n[21]=[u("在线流")])),_:1})]),_:1},8,["value"])]),_:1}),e.isLive?S("",!0):(r(),x(I,{key:0,label:"倍速"},{default:t(()=>[l(ae,{value:e.speedEnum,"onUpdate:value":n[9]||(n[9]=c=>e.speedEnum=c),style:{width:"133px"}},{default:t(()=>[l(W,{value:0},{default:t(()=>n[22]||(n[22]=[u("标准")])),_:1}),l(W,{value:6},{default:t(()=>n[23]||(n[23]=[u("2倍速")])),_:1}),l(W,{value:7},{default:t(()=>n[24]||(n[24]=[u("4倍速")])),_:1}),l(W,{value:8},{default:t(()=>n[25]||(n[25]=[u("8倍速")])),_:1}),l(W,{value:9},{default:t(()=>n[26]||(n[26]=[u("16倍速")])),_:1})]),_:1},8,["value"])]),_:1})),l(I,{label:"协议"},{default:t(()=>[l(Q,{value:e.transType,"onUpdate:value":n[10]||(n[10]=c=>e.transType=c)},{default:t(()=>[l(z,{value:"TCP"},{default:t(()=>n[27]||(n[27]=[u("TCP")])),_:1}),l(z,{value:"UDP"},{default:t(()=>n[28]||(n[28]=[u("UDP")])),_:1}),l(z,{value:"Multicast"},{default:t(()=>n[29]||(n[29]=[u("其他")])),_:1})]),_:1},8,["value"])]),_:1}),l(I,{label:"其他"},{default:t(()=>[l(ee,{checked:e.onDemand,"onUpdate:checked":n[11]||(n[11]=c=>e.onDemand=c)},{default:t(()=>n[30]||(n[30]=[u("按需")])),_:1},8,["checked"]),l(ee,{checked:e.audio,"onUpdate:checked":n[12]||(n[12]=c=>e.audio=c)},{default:t(()=>n[31]||(n[31]=[u("音频")])),_:1},8,["checked"])]),_:1})],64)):S("",!0),l(ue,{justify:"flex-end"},{default:t(()=>[l(A,{onClick:n[13]||(n[13]=c=>C.value=!1)},{default:t(()=>n[32]||(n[32]=[u("取消")])),_:1}),l(A,{type:"primary","html-type":"submit",class:"ml16px"},{default:t(()=>[u(te(v.value?"提交":"修改"),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])}}},ot={class:"player-pro-live"},st={__name:"live",props:{background:{type:String,default:""},videoUrl:{type:String,default:""},watermark:{type:Object,default:()=>{}},isLogo:{type:Boolean,default:!0},muted:{type:Boolean,default:!1}},emits:["contextmenuClose","statsInfo"],setup(m,{emit:$}){const g=$,a=_(null),C=_(!0),b=_(null),v=m,k=()=>{var T=b.value;console.log(T);let p={MSE:!0,stretch:!1,isLogo:v.isLogo};a.value=new window.EasyPlayerPro(T,p),a.value.on("error",(j,o)=>{console.log("error:",j,o)}),a.value.on("timeout",()=>{w()}),a.value.on("delayTimeout",()=>{}),a.value.on("playbackEnd",()=>{}),a.value.on("liveEnd",()=>{g("contextmenuClose")}),a.value.on("recordEnd",j=>{}),a.value.on("play",()=>{}),a.value.on("contextmenuClose",()=>{g("contextmenuClose")}),a.value.on("stats",j=>{let o=j;o.videoPlaybackQuality=a.value.valueplayer.getVideoPlaybackQuality(),o.videoInfo=a.value.valueplayer.video&&a.value.valueplayer.video.videoInfo||{},o.audioInfo=a.value.valueplayer.audio&&a.value.valueplayer.audio.audioInfo||{},o.kbpsShow=a.value.valueplayer.control?a.value.valueplayer.control.kbpsShow:"0 KB/s",g("statsInfo",o)})},e=()=>{v.videoUrl!=""&&a.value&&a.value.play(v.videoUrl).then(()=>{}).catch(T=>{console.error("playerPro error:",T),setTimeout(()=>{w()},2e3)})},w=()=>{C.value=!1,D().then(()=>{C.value=!0,setTimeout(()=>{E().then(()=>{e()})},100)})},E=()=>new Promise((T,p)=>{k(),T()}),D=()=>new Promise((T,p)=>{P(),setTimeout(()=>{T()},100)}),P=()=>{a.value&&(a.value.destroy(),a.value=null)};return ne(()=>v.videoUrl,T=>{T==""?P():w()},{deep:!0}),Le(()=>{k(),v.videoUrl!=""&&e()}),ce(()=>{P()}),(T,p)=>(r(),R("div",ot,[C.value?(r(),R("div",{key:0,ref_key:"EasyplayerProRef",ref:b},null,512)):S("",!0)]))}},at=ye(st,[["__scopeId","data-v-31b78dfd"]]),ut=["src"],it={__name:"index",props:{imgUrl:{type:String,default:""}},emits:[""],setup(m,{emit:$}){const g=_(!1),a=m,C=()=>{g.value=!0};return ne(()=>a.videoUrl,b=>{},{deep:!0}),Le(()=>{}),ce(()=>{}),(b,v)=>{const k=fe;return r(),x(k,{class:"img-box cp",justify:"center",align:"center"},{default:t(()=>[g.value||m.imgUrl==""?(r(),x(k,{key:0,justify:"center",align:"center"},{default:t(()=>[l(L(Je))]),_:1})):(r(),R("img",{key:1,src:m.imgUrl,alt:"png",onError:v[0]||(v[0]=e=>C(e))},null,40,ut))]),_:1})}}},be=ye(it,[["__scopeId","data-v-8b851b1f"]]),rt={class:"flex items-center space-x-2"},pt={class:"flex items-center space-x-2"},dt={class:"flex items-center space-x-2"},vt={class:"flex items-center space-x-2"},ft={class:"flex items-center space-x-2"},mt={class:"flex items-center space-x-2"},ct={__name:"url",setup(m,{expose:$}){const g=_(!1),a=_({http_flv:"",http_hls:"",ws_flv:"",webrtc:"",rtmp:"",rtsp:""}),C=k=>{a.value=k,g.value=!0},b=()=>{g.value=!1},v=k=>{oe(k)};return $({open:C}),(k,e)=>{const w=ve,E=me,D=xe,P=ge,T=le;return r(),x(T,{open:g.value,"onUpdate:open":e[12]||(e[12]=p=>g.value=p),centered:"",title:"分发流地址",onCancel:b},{default:t(()=>[l(P,{layout:"vertical",model:a.value,class:"pt-2"},{default:t(()=>[l(D,{label:"HTTP-FLV"},{default:t(()=>[U("div",rt,[l(w,{value:a.value.http_flv,"onUpdate:value":e[0]||(e[0]=p=>a.value.http_flv=p),readonly:"",disabled:""},null,8,["value"]),l(E,{onClick:e[1]||(e[1]=p=>v(a.value.http_flv))},{default:t(()=>e[13]||(e[13]=[u("复制")])),_:1})])]),_:1}),l(D,{label:"HTTP-HLS"},{default:t(()=>[U("div",pt,[l(w,{value:a.value.http_hls,"onUpdate:value":e[2]||(e[2]=p=>a.value.http_hls=p),readonly:"",disabled:""},null,8,["value"]),l(E,{onClick:e[3]||(e[3]=p=>v(a.value.http_hls))},{default:t(()=>e[14]||(e[14]=[u("复制")])),_:1})])]),_:1}),l(D,{label:"WS-FLV"},{default:t(()=>[U("div",dt,[l(w,{value:a.value.ws_flv,"onUpdate:value":e[4]||(e[4]=p=>a.value.ws_flv=p),readonly:"",disabled:""},null,8,["value"]),l(E,{onClick:e[5]||(e[5]=p=>v(a.value.ws_flv))},{default:t(()=>e[15]||(e[15]=[u("复制")])),_:1})])]),_:1}),l(D,{label:"WebRTC"},{default:t(()=>[U("div",vt,[l(w,{value:a.value.webrtc,"onUpdate:value":e[6]||(e[6]=p=>a.value.webrtc=p),readonly:"",disabled:""},null,8,["value"]),l(E,{onClick:e[7]||(e[7]=p=>v(a.value.webrtc))},{default:t(()=>e[16]||(e[16]=[u("复制")])),_:1})])]),_:1}),l(D,{label:"RTMP"},{default:t(()=>[U("div",ft,[l(w,{value:a.value.rtmp,"onUpdate:value":e[8]||(e[8]=p=>a.value.rtmp=p),readonly:"",disabled:""},null,8,["value"]),l(E,{onClick:e[9]||(e[9]=p=>v(a.value.rtmp))},{default:t(()=>e[17]||(e[17]=[u("复制")])),_:1})])]),_:1}),l(D,{label:"RTSP"},{default:t(()=>[U("div",mt,[l(w,{value:a.value.rtsp,"onUpdate:value":e[10]||(e[10]=p=>a.value.rtsp=p),readonly:"",disabled:""},null,8,["value"]),l(E,{onClick:e[11]||(e[11]=p=>v(a.value.rtsp))},{default:t(()=>e[18]||(e[18]=[u("复制")])),_:1})])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])}}},yt={class:"bg-white rounded-md cursor-pointer p-2 flex justify-between items-center"},_t={class:"bg-white rounded-md mt-5"},kt={class:"w300px h200px"},bt={class:"w60px h24px"},gt={class:"json-display"},xt={class:"pagination-box p10px"},Ct={class:"h400px"},wt={class:"ml16px"},Tt={class:"cp"},Ut={__name:"index",setup(m){const $=[{title:"ID",width:80,dataIndex:"id",key:"id",fixed:"left"},{title:"名称",width:160,dataIndex:"name",key:"name"},{title:"快照",align:"center",width:80,dataIndex:"snapURL",key:"snapURL"},{title:"状态",align:"center",width:80,dataIndex:"online",key:"online"},{title:"类型",align:"center",width:100,dataIndex:"liveType",key:"liveType"},{title:"启用",align:"center",width:80,dataIndex:"enable",key:"enable"},{title:"详情",align:"center",width:80,dataIndex:"info",key:"info"},{title:"地址",align:"center",width:100,dataIndex:"url",key:"url"},{title:"创建时间",align:"center",width:160,dataIndex:"created_at",key:"created_at"},{title:"操作",key:"operation",fixed:"right",align:"center",width:160}],g=_([]),a=_(null),C=_(null),b=_(null),v=_(null),k=_(!1),e=_(""),w=_(""),E=_(""),D=_(""),P=_([]),T=_({rtmp:"",rtsp:""}),p=_(""),j=_(""),o={current:1,pageSize:10,total:0,q:void 0,type:void 0},n=_(),Y=i=>{B.postPlayStart(i).then(s=>{const d=s.data.info,f={http_flv:d.http_flv,http_hls:d.http_hls,ws_flv:d.ws_flv,webrtc:d.webrtc,rtmp:d.rtmp,rtsp:d.rtsp};n.value.open(f)})},I=(i,s)=>{B.getLiveInfo(i.id).then(d=>{console.log(d)}),B.getStreamInfo(i.id).then(d=>{if(d.status==200){if(d.data.code==0){let f=d.data.data;if(f.pub&&f.pub.session_id==""&&delete f.pub,f.pull&&f.pull.session_id==""&&delete f.pull,f.subs&&f.subs.length>=1){let V=[];f.subs.forEach(F=>{F.session_id!=""&&V.push(F)}),f.subs=[...V]}else delete f.subs;D.value=JSON.stringify(f,null,2)}else D.value=JSON.stringify(d.data,null,2);s&&q.success({description:"刷新成功!"})}})},z=()=>{a.value=setInterval(()=>{N()},6e3)},Q=()=>{clearInterval(a.value),a.value!=null&&(a.value=null)},X=()=>{j.value==""?o.type=void 0:o.type=j.value,N()},G=()=>{p.value==""?o.q=void 0:o.q=p.value,N()},se=tt(()=>{G()},500);ne(()=>p.value,()=>{se()});const W=i=>{w.value=i.value,E.value=i.key,!(i.value.includes("rtmp")||i.value.includes("rtsp"))&&(e.value=i.value)},ae=i=>{if(i.enable==0){q.warning({description:"通道未启用!"});return}if(i.online==0){q.warning({description:"通道已离线!"});return}b.value=i.id,B.postPlayStart(b.value).then(s=>{if(s.status==200){k.value=!0;let d=s.data.info||{};P.value=[];let f="";for(const V in d){let F=d[V];switch(V){case"http_flv":f=F,E.value="HTTP-FLV",P.value.push({key:"HTTP-FLV",value:F});break;case"http_hls":P.value.push({key:"HTTP-HLS",value:F});break;case"ws_flv":P.value.push({key:"WS-FLV",value:F});break;case"webrtc":P.value.push({key:"WEBRTC",value:F});break;case"rtsp":P.value.push({key:"RTSP",value:F});break}}f!=""&&(w.value=f,e.value=f)}}),i.liveType=="pull"&&i.onDemand&&ee()},ee=()=>{C.value=setInterval(()=>{B.postPlayStart(b.value)},15e3)},A=()=>{clearInterval(C.value),C.value!=null&&(C.value=null)},ue=()=>{v.value&&v.value.setOpen(null)},ie=i=>{v.value&&v.value.setOpen(i)},re=(i,s)=>{let d="",f=null;switch(i){case"enable":d="enable",f=s.enable?1:0;break;case"onDemand":d="onDemand",f=s.onDemand?1:0;break;case"audio":d="audio",f=s.audio?1:0;break}if(d==""||f==null){q.error({description:"参数异常!"});return}B.putLiveOne(s.liveType,s.id,d,f).then(V=>{V.status==200&&(N(),q.success({description:"更新成功!"}))})},c=()=>{A()};ne(()=>k.value,i=>{i==!1&&A()},{deep:!0});const Pe=()=>{N(),v.value&&v.value.setClose()},Ie=i=>{le.confirm({title:`确定要删除 “${i.name}” 吗?`,icon:l(Ye),okText:"确定",okType:"danger",cancelText:"取消",onOk(){B.deleteLive(i.id).then(s=>{s.status==200&&(q.success({description:"删除成功!"}),N())})},onCancel(){}})},N=()=>{B.getLiveList({page:o.current,size:o.pageSize,type:o.type,q:o.q}).then(i=>{i.status==200&&(o.total=i.data.total,g.value=i.data.items,T.value.rtmp=i.data.rtmp,T.value.rtsp=i.data.rtsp)}).catch(i=>{})},Oe=i=>{o.current=i,N()};return N(),z(),ce(()=>{Q(),A()}),(i,s)=>{const d=me,f=Se,V=Ue,F=Ae,Ee=We,J=fe,Z=Te,De=Ce,pe=we,Re=He,je=Ne,Fe=ve,Be=le;return r(),R(H,null,[U("div",yt,[U("div",null,[l(d,{type:"primary",onClick:ue},{icon:t(()=>[l(L(Qe))]),default:t(()=>[s[8]||(s[8]=u(" 创建直播 "))]),_:1})]),l(J,{justify:"flex-end"},{default:t(()=>[l(Ee,null,{default:t(()=>[l(V,{value:j.value,"onUpdate:value":s[0]||(s[0]=y=>j.value=y),style:{width:"80px"},onChange:X},{default:t(()=>[l(f,{value:""},{default:t(()=>s[9]||(s[9]=[u("全部")])),_:1}),l(f,{value:"pull"},{default:t(()=>s[10]||(s[10]=[u("拉流")])),_:1}),l(f,{value:"push"},{default:t(()=>s[11]||(s[11]=[u("推流")])),_:1})]),_:1},8,["value"]),l(F,{value:p.value,"onUpdate:value":s[1]||(s[1]=y=>p.value=y),placeholder:"请输入关键字...",class:"w-68","enter-button":"",onSearch:G},null,8,["value"])]),_:1})]),_:1})]),U("div",_t,[l(Re,{columns:$,"data-source":g.value,pagination:!1,scroll:{x:1200}},{bodyCell:t(({column:y,text:K,record:O})=>[y.key==="operation"?(r(),R(H,{key:0},[l(d,{type:"primary",shape:"circle",class:"mr5px",onClick:h=>ae(K)},{default:t(()=>[l(L(_e))]),_:2},1032,["onClick"]),l(d,{type:"primary",shape:"circle",class:"mr5px ml5px",onClick:h=>ie(K)},{default:t(()=>[l(L(Xe))]),_:2},1032,["onClick"]),l(d,{type:"primary",danger:"",shape:"circle",class:"ml5px",onClick:h=>Ie(K)},{default:t(()=>[l(L(Ze))]),_:2},1032,["onClick"])],64)):S("",!0),y.key==="liveType"?(r(),R(H,{key:1},[O.liveType=="pull"?(r(),x(Z,{key:0,class:"mr0px",color:"success"},{default:t(()=>s[12]||(s[12]=[u("拉流")])),_:1})):O.liveType=="push"?(r(),x(Z,{key:1,class:"mr0px",color:"warning"},{default:t(()=>s[13]||(s[13]=[u("推流")])),_:1})):S("",!0)],64)):S("",!0),y.key==="online"?(r(),R(H,{key:2},[O.online==1?(r(),x(Z,{key:0,class:"mr0px",color:"success"},{default:t(()=>s[14]||(s[14]=[u("在线")])),_:1})):O.online==2?(r(),x(Z,{key:1,class:"mr0px",color:"success"},{default:t(()=>s[15]||(s[15]=[u("直播中")])),_:1})):(r(),x(Z,{key:2,class:"mr0px",color:"default"},{default:t(()=>s[16]||(s[16]=[u("离线")])),_:1}))],64)):S("",!0),y.key==="url"?(r(),x(d,{key:3,size:"small",onClick:h=>Y(O.id)},{default:t(()=>s[17]||(s[17]=[u("查看流地址")])),_:2},1032,["onClick"])):S("",!0),y.key==="enable"?(r(),x(De,{key:4,checked:O.enable,"onUpdate:checked":h=>O.enable=h,onChange:h=>re("enable",O)},null,8,["checked","onUpdate:checked","onChange"])):S("",!0),y.key==="snapURL"?(r(),x(J,{key:5,justify:"center"},{default:t(()=>[l(pe,{placement:"left"},{content:t(()=>[U("div",kt,[l(be,{"img-url":O.snapURL},null,8,["img-url"])])]),title:t(()=>s[18]||(s[18]=[])),default:t(()=>[U("div",bt,[l(be,{"img-url":O.snapURL},null,8,["img-url"])])]),_:2},1024)]),_:2},1024)):S("",!0),y.key==="info"?(r(),x(J,{key:6,justify:"center"},{default:t(()=>[l(pe,{placement:"left"},{content:t(()=>[U("pre",gt,te(D.value),1)]),title:t(()=>[l(J,{justify:"space-between"},{default:t(()=>[s[19]||(s[19]=U("span",null,"视频流详情",-1)),l(L($e),{class:"cp",onClick:h=>I(O,!0)},null,8,["onClick"])]),_:2},1024)]),default:t(()=>[l(d,{size:"small",class:"mr0px cp",onMouseover:h=>I(O,!1),onClick:h=>I(O,!0)},{default:t(()=>s[20]||(s[20]=[u("详情")])),_:2},1032,["onMouseover","onClick"])]),_:2},1024)]),_:2},1024)):S("",!0)]),_:1},8,["data-source"]),U("div",xt,[l(je,{current:o.current,"onUpdate:current":s[2]||(s[2]=y=>o.current=y),pageSize:o.pageSize,"onUpdate:pageSize":s[3]||(s[3]=y=>o.pageSize=y),size:i.small,onChange:Oe,total:o.total,"show-less-items":""},null,8,["current","pageSize","size","total"])]),l(nt,{ref_key:"LiveFormRef",ref:v,onOk:Pe},null,512),l(Be,{open:k.value,"onUpdate:open":s[7]||(s[7]=y=>k.value=y),title:"直播",width:"760px",onClose:c},{footer:t(()=>[l(J,{justify:"flex-end"},{default:t(()=>[l(Fe,{value:w.value,"onUpdate:value":s[5]||(s[5]=y=>w.value=y),disabled:""},{addonBefore:t(()=>[l(pe,{placement:"right"},{content:t(()=>[(r(!0),R(H,null,et(P.value,(y,K)=>(r(),x(J,{justify:"space-between",class:"cp m14px",key:K},{default:t(()=>[U("span",null,te(y.key),1),U("div",wt,[y.key!="RTMP"&&y.key!="RTSP"?(r(),x(L(_e),{key:0,style:{color:"#0cbb92"},onClick:O=>W(y)},null,8,["onClick"])):S("",!0),l(L(de),{class:"ml16px",style:{color:"#0cbb92"},onClick:O=>L(oe)(y.value)},null,8,["onClick"])])]),_:2},1024))),128))]),title:t(()=>s[21]||(s[21]=[])),default:t(()=>[U("span",Tt,[u(te(E.value)+" ",1),l(L(Ke))])]),_:1})]),addonAfter:t(()=>[l(L(de),{class:"cp",onClick:s[4]||(s[4]=y=>L(oe)(w.value))})]),_:1},8,["value"]),l(d,{onClick:s[6]||(s[6]=y=>k.value=!1),class:"ml16px"},{default:t(()=>s[22]||(s[22]=[u("关闭")])),_:1})]),_:1})]),default:t(()=>[U("div",Ct,[k.value?(r(),x(at,{key:0,videoUrl:e.value},null,8,["videoUrl"])):S("",!0)])]),_:1},8,["open"]),l(ct,{ref_key:"urlModalRef",ref:n},null,512)])],64)}}},wl=ye(Ut,[["__scopeId","data-v-b80538ee"]]);export{wl as default};
